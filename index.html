<!DOCTYPE html>
<html lang="en">
<head>  
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self'; 
    script-src 'self' 'unsafe-inline'; 
    style-src 'self' 'unsafe-inline'; 
    img-src 'self' https://www.paypalobjects.com; 
    frame-src 'none';
    connect-src 'self' https://student-live.oppcus2025.workers.dev;" />
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />
  <title>OverPowered StudyGuides</title>
  <link rel="icon" type="image/png" href="images/oppcus.png" />
  <style>
    body {
      background-color: #000;
      color: #00FF00;
      font-family: monospace;
      text-align: center;
      padding: 30px;
      margin: 0;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    .highlight-message,
    .confidence-message,
    .details-message,
    .upgrade-message {
      font-size: 1rem;
      color: #66ff66;
      font-style: italic;
      opacity: 0.8;
      margin-bottom: 10px;
    }
    .cert-group {
      margin-bottom: 20px;
    }
    .cert-icon {
      display: inline-block;
      margin: 20px;
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
    }
    .cert-icon:hover {
      transform: scale(1.1);
    }
    .cert-icon img {
      width: 120px;
      height: auto;
      border: 2px solid #00FF00;
      border-radius: 10px;
      box-shadow: 0 0 10px #00FF00;
    }
    #other-certs {
      margin-top: 30px;
    }
    .footer-buttons {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 30px;
      align-items: flex-start;
      z-index: 9999;
    }
    .circle-button {
      width: 100px;
      height: 100px;
      background-color: #000;
      border: 2px solid #00FF00;
      border-radius: 50%;
      color: #00FF00;
      font-weight: bold;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      box-shadow: 0 0 12px #00FF00;
      transition: transform 0.2s, box-shadow 0.3s;
      text-align: center;
    }
    .circle-button:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px #00FF00;
    }
    .hover-box {
      display: none;
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #000;
      color: #00FF00;
      border: 3px solid #00FF00;
      border-radius: 8px;
      padding: 8px 12px;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 0 12px #00FF00;
      z-index: 10001;
      white-space: nowrap;
      min-width: 150px;
      margin-top: 0;
      pointer-events: auto;
    }
    .hover-box a {
      color: #00FF00;
      text-decoration: none;
    }
    .hover-box a:hover {
      text-decoration: underline;
    }
    .cert-icon:hover .hover-box,
    .hover-box:hover {
      display: block;
    }
    .pp-5B76FJE8MKP2L {
      text-align: center;
      border: none;
      border-radius: 0.25rem;
      min-width: 9rem;
      padding: 0 1.5rem;
      height: 2rem;
      font-weight: bold;
      background-color: #FFD140;
      color: #000000;
      font-family: "Helvetica Neue", Arial, sans-serif;
      font-size: 0.9rem;
      line-height: 1.1rem;
      cursor: pointer;
    }
    #paypalContainer {
      display: inline-grid;
      justify-items: center;
      align-content: start;
      gap: 0.5rem;
      margin-top: 0px;
    }
    #paypalContainer img {
      max-width: 80%;
      height: auto;
    }
    #paypalContainer section {
      font-size: 0.65rem;
    }
    #paypalContainer section img {
      height: 0.75rem;
      vertical-align: middle;
    }
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1a1a1a;
      color: #00FF00;
      border: 3px solid #00FF00;
      border-radius: 8px;
      padding: 20px;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 0 12px #00FF00;
      z-index: 10002;
      text-align: center;
    }
    .popup button {
      background-color: #FFD140;
      color: #000;
      border: none;
      padding: 10px 20px;
      margin-top: 15px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>OverPowered StudyGuides</h1>

  <!-- Total and Live Count Display -->
  <div id="totalOppcStudents" style="font-weight: bold; margin-bottom: 6px;">Total OPPC Students: 31</div>
  <div id="liveCountDisplay" style="margin-bottom: 20px; font-weight: bold;">Loading live count...</div>

  <div class="highlight-message" id="noSignUpMessage">
    NO sign up | NO ads | NO cookies | NO BS 
  </div>
  
  <div class="details-message">
    500+ multiple choice questions | 100 PBQs | Linux Terminal Simulator
  </div>

  <div class="upgrade-message" id="oneTimeMessage">
    Lifetime access to all content for just a ONE-TIME $4.99 | NO subscription BS
  </div>

  <!-- PayPal Button -->
  <div id="paypalContainer">
    <form action="https://www.paypal.com/ncp/payment/5B76FJE8MKP2L" method="post" target="_blank">
      <input class="pp-5B76FJE8MKP2L" type="submit" value="Buy Now" />
      <img src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="cards" />
      <section style="font-size: 0.65rem;">
        Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" />
      </section>
    </form>
  </div>

  <!-- Popup for cache message -->
  <div id="cachePopup" class="popup">
    <p>*Don't delete oppc.us cache*</p>
    <button onclick="acknowledgePopup()">I acknowledge</button>
  </div>

  <!-- Certification Groups -->
  <div class="cert-group" id="comptia">
    <div class="cert-icon" id="aplus">
      <img src="images/aplus.png" alt="A+ Certification" />
      <div class="hover-box">
        <a href="#" class="locked" data-url="aplus/aplus.html">Core 1 ðŸ”’</a><br>
        <a href="#" class="locked" data-url="aplus/aplus2.html">Core 2 ðŸ”’</a>
      </div>
    </div>

    <div class="cert-icon" id="secplus">
      <img src="images/secplus.png" alt="Security+ Certification" />
      <div class="hover-box">
        <a href="#" class="locked" data-url="secplus/secplus.html">Study Guide ðŸ”’</a>
      </div>
    </div>

    <div class="cert-icon" id="networkPlus">
      <img src="images/netplus.png" alt="Network+ Certification" />
      <div class="hover-box">
        <a href="#" class="locked" data-url="netplus/netplus.html">Study Guide ðŸ”’</a>
      </div>
    </div>
  </div>

  <div class="cert-group" id="other-certs">
    <div class="cert-icon" id="lpi">
      <img src="images/lpi.png" alt="LPI Certification" />
      <div class="hover-box">
        <a href="#" class="locked" data-url="lpi/lpi.html">Core 1 ðŸ”’</a><br>
        <a href="#" class="locked" data-url="lpi/lpi2.html">Core 2 ðŸ”’</a><br>
        <a href="#" class="locked" data-url="lpi/lpi3.html">Core 3 ðŸ”’</a>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer-buttons">
    <a href="https://www.comptia.org/en-us/" class="circle-button" target="_blank">CompTIA</a>
    <a href="https://www.lpi.org/" class="circle-button" target="_blank">Linux</a>
    <a href="https://www.cisco.com/site/us/en/learn/training-certifications/certifications/index.html" class="circle-button" target="_blank">Cisco</a>
    <a id="discordButton" class="circle-button" href="https://discord.gg/NXE4gU8nVe" style="opacity: 0.4; pointer-events: none;">Discord</a>
  </div>

  <!-- Salt Hash Validation -->
  <!-- Unlock Logic -->
<script>
document.addEventListener('DOMContentLoaded', async function() {
  try {
    const params = new URLSearchParams(window.location.search);

    // âœ… Unlock if URL contains ?unlocked=paid
    if (params.get('unlocked') === 'paid') {
      localStorage.setItem('unlocked', 'paid');
    }

    const storedHash = localStorage.getItem('oppcusTokenHash');
    const salt = 'oppcus-salt-v1';
    const fpData = navigator.userAgent + navigator.language + screen.width + screen.height + salt;
    const digest = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(fpData));
    const deviceHash = Array.from(new Uint8Array(digest)).map(b => b.toString(16).padStart(2, '0')).join('');

    if (storedHash === deviceHash) {
      localStorage.setItem('unlocked', 'paid');
    }

    // âœ… Check unlock status
    const isUnlocked = localStorage.getItem('unlocked') === 'paid';
    if (isUnlocked) {
      document.querySelectorAll('a.locked').forEach(link => {
        link.textContent = link.textContent.replace(' ðŸ”’', '');
        link.href = link.dataset.url;
        link.classList.remove('locked');
      });
      document.getElementById('discordButton').style.opacity = '1';
      document.getElementById('discordButton').style.pointerEvents = 'auto';
      document.getElementById('paypalContainer').style.display = 'none';
      document.getElementById('noSignUpMessage').style.display = 'none';
      document.getElementById('oneTimeMessage').style.display = 'none';
      document.querySelector('.details-message').style.display = 'none'; // Hide details-message in paid version
      if (!localStorage.getItem('cacheAcknowledged')) {
        document.getElementById('cachePopup').style.display = 'block';
      }
    }
  } catch (err) {
    console.error('Unlock error:', err);
  }
});

function acknowledgePopup() {
  localStorage.setItem('cacheAcknowledged', 'true');
  document.getElementById('cachePopup').style.display = 'none';
}
</script>

  <!-- Live Count -->
  <script>
    const liveCountElement = document.getElementById('liveCountDisplay');
    const WORKER_URL = "https://student-live.oppcus2025.workers.dev/live-count";
    async function fetchLiveCount() {
      try {
        const response = await fetch(WORKER_URL, { cache: "no-store" });
        const data = await response.json();
        liveCountElement.textContent = `Live Students Currently Online: ${data.count ?? 'Unavailable'}`;
      } catch {
        liveCountElement.textContent = 'Error fetching live count';
      }
    }
    fetchLiveCount();
    setInterval(fetchLiveCount, 10000);
  </script>

</body>
</html>
