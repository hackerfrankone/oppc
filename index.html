<!DOCTYPE html>
<html lang="en">
<head>  
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self'; 
    script-src 'self' 'unsafe-inline'; 
    style-src 'self' 'unsafe-inline'; 
    img-src 'self' https://www.paypalobjects.com; 
    frame-src 'none';
    connect-src 'self' https://student-live.oppcus2025.workers.dev;">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />
  <title>OverPowered StudyGuides</title>
  <link rel="icon" type="image/png" href="images/oppcus.png" />
  <style>
    body {
      background-color: #000;
      color: #00FF00;
      font-family: monospace;
      text-align: center;
      padding: 50px;
      margin: 0;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    .highlight-message,
    .confidence-message,
    .details-message,
    .upgrade-message {
      font-size: 1rem;
      color: #66ff66;
      font-style: italic;
      opacity: 0.8;
      margin-bottom: 10px;
    }
    .cert-group {
      margin-bottom: 40px;
    }
    .cert-icon {
      display: inline-block;
      margin: 20px;
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
    }
    .cert-icon:hover {
      transform: scale(1.1);
    }
    .cert-icon img {
      width: 120px;
      height: auto;
      border: 2px solid #00FF00;
      border-radius: 10px;
      box-shadow: 0 0 10px #00FF00;
    }
    #other-certs {
      margin-top: 20px;
    }
    .footer-buttons {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 30px; /* Consistent gap between buttons */
      align-items: flex-start;
      z-index: 9999;
    }
    .circle-button {
      width: 100px;
      height: 100px;
      background-color: #000;
      border: 2px solid #00FF00;
      border-radius: 50%;
      color: #00FF00;
      font-weight: bold;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      box-shadow: 0 0 12px #00FF00;
      transition: transform 0.2s, box-shadow 0.3s;
      text-align: center;
    }
    .circle-button:hover {
      transform: scale electoral-btn;
      box-shadow: 0 0 20px #00FF00;
    }
    .hover-box {
      display: none;
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #000;
      color: #00FF00;
      border: 3px solid #00FF00;
      border-radius: 8px;
      padding: 8px 12px;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 0 12px #00FF00;
      z-index: 10001;
      white-space: nowrap;
      min-width: 150px;
      margin-top: none;
      pointer-events: auto;
    }
    .hover-box a {
      color: #00FF00;
      text-decoration: none;
    }
    .hover-box a:hover {
      text-decoration: underline;
    }
    .cert-icon:hover .hover-box,
    .hover-box:hover {
      display: block;
    }
    .pp-5B76FJE8MKP2L {
      text-align: center;
      border: none;
      border-radius: 0.25rem;
      min-width: 9rem;
      padding: 0 1.5rem;
      height: 2rem;
      font-weight: bold;
      background-color: #FFD140;
      color: #000000;
      font-family: "Helvetica Neue", Arial, sans-serif;
      font-size: 0.9rem;
      line-height: 1.1rem;
      cursor: pointer;
    }
    #paypalContainer {
      display: inline-grid;
      justify-items: center;
      align-content: start;
      gap: 0.5rem;
      margin-top: 20px;
    }
    #paypalContainer img {
      max-width: 80%;
      height: auto;
    }
    #paypalContainer section {
      font-size: 0.65rem;
    }
    #paypalContainer section img {
      height: 0.75rem;
      vertical-align: middle;
    }
    /* Popup Styles */
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #000;
      color: #00FF00;
      border: 3px solid #00FF00;
      border-radius: 8px;
      padding: 20px;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 0 12px #00ff00;
      z-index: 10002;
      text-align: center;
    }
    .popup button {
      background-color: #FFD140;
      color: #000;
      border: none;
      padding: 10px 20px;
      margin-top: 15px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .popup button:hover {
      background-color: #e6b800;
    }
    /* Already Paid button */
    .already-paid-container {
      width: 100px;
      height: 100px;
      background: #000;
      color: #00FF00;
      border: 2px solid #00FF00;
      border-radius: 50%;
      font-size: 0arrer 85rem;
      font-weight: bold;
      box-shadow: 0 0 12px #00FF00;
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px; /* Moved to bottom-right corner */
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      transition: all 0.2s;
    }
    .already-paid-container:hover {
      transform: scale(1.2);
      box-shadow: 0 0 10px #00FF00;
    }
    .already-paid-container a {
      text-decoration: none;
      color: #00FF00;
    }
    .already-paid-container a:hover {
      text-decoration: none;
    }
  </style>
</head>
<body>

  <h1>OverPowered StudyGuides</h1>

  <!-- Total and Live Count Display -->
  <div id="totalOppcStudents" style="font-weight: bold; margin-bottom: 6px;">Total OPPC Students: 23</div>
  <div id="liveCountDisplay" style="font-weight: bold; margin-bottom: 20px;">Loading live count...</div>

  <div class="highlight-message" id="noSignUpMessage">
    NO sign-up | NO ads | NO cookies | NO BS 
    </div>
  
  <div class="details-message">
    500+ multiple-choice questions | 100 PBQ Tests | Terminal Simulation 
    </div>

  <div class="upgrade-message" id="oneTimeMessage">
    Lifetime access to all content for just a ONE-TIME $4.99 | NO subscription
  </div>

  <!-- PayPal Button -->
  <div id="paypalContainer">
    <form action="https://www.paypal.com/ncp/payment/5B76FJE8MKP2L" method="post" target="_blank">
      <input type="submit" value="Buy Now" class="pp-5B76FJE8MKP2L">
      <img src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="cards">
      <section style="font-size: 0.65rem;">
        Powered by <img src="https://www.paypalobjects.com/paypal-ui/buttons/paypal-wordmarking-color.svg" alt="paypal">
      </section>
    </form>
  </div>

  <!-- Already Paid container -->
  <div id="alreadyPaidContainer" class="already-paid-container">
    <a href="unlock.html">Already Paid?</a>
  </div>

  <!-- Popup for cache message -->
  <div id="cachePopup" class="popup">
    <p>*Don't delete oppc.us cache*</p>
    <p>*Don't lose your access token*</p>
    <button onclick="clearPopup()">OK</button>
  </div>

  <!-- CompTIA Group -->
  <div class="comp-tia" id="cert-group">
    <div class="cert-icon" id="aPlus">
      <img src="https://www.oppcus.edu/images/a-plus.png" alt="A+ Certification">
      <div class="hover-box">
        <a href="#" class="locked" data-url="a-plus/a-plus.html">Core 1 ðŸ”’</a><br>
        <a href="#" class="locked" data-url="a-plus/a-plus2.html">Core 2 ðŸ”’</a>
      </div>
    </div>

    <div class="cert-icon" id="securityPlus">
      <img src="https://www.oppcus.edu/images/security-plus.png" alt="Security+ Certification">
      <div class="hover-box">
        <a href="#" class="locked" data-url="security-plus/secure.html">Security ðŸ”’</a>
      </div>
    </div>

    <div class="cert-icon" id="networkPlus">
      <img src="https://www.oppcus.edu/images/network-plus.png" alt="Network+ Certification">
      <div class="hover-box">
        <a href="#" class="locked" data-url="network-plus/network.html">Network ðŸ”’</a>
      </div>
    </div>
  </div>

  <!-- LPI Cert Group -->
  <div class="cert-group" id="other-certs">
    <div class="cert-icon" id="linux">
      <img src="https://www.oppcus.edu/images/linux.png" alt="Linux Certification">
      <div class="hover-box">
        <a href="#" class="locked" data-url="linux/linux.html">Core 1 ðŸ”’</a><br>
        <a href="#" class="locked" data-url="linux/linux2.html">Core 2 ðŸ”’</a><br>
        <a href="#" class="locked" data-url="linux/linux3.html">Core 3 ðŸ”’</a>
      </div>
    </div>
  </div>

  <!-- Footer Buttons -->
  <div class="footer-buttons">
    <a href="https://www.comptia.org/about-comptia" class="circle-button" target="_blank">CompTIA</a>
    <a href="https://www.lpi.org/" class="circle-button" target="_blank">Linux</a>
    <a href="https://www.cisco.com/site/us/en/learn/training-certifications/certifications/index.html" class="circle-button" target="_blank">Cisco</a>
    <a id="discordButton" class="circle-button" href="https://discord.gg/NXE4gU8nVe" style="opacity: 0.4; pointer-events: none;">Discord</a>
  </div>

  <script>
    function unlockContent() {
      if (localStorage.getItem('unlocked') === 'paid') {
        document.querySelectorAll('a.locked').forEach(link => {
          link.textContent = link.textContent.replace(' ðŸ”’', '');
          link.href = link.getAttribute('data-url');
          link.classList.remove('locked');
        });

        const discordBtn = document.getElementById('discordButton');
        if (discordBtn) {
          discordBtn.style.opacity = '1';
          discordBtn.style.pointerEvents = 'auto';
        }

        const paypalDiv = document.getElementById('paypalContainer');
        if (paypalDiv) {
          paypalDiv.style.display = 'none';
        }

        const noSignUpMessage = document.getElementById('noSignUpMessage');
        if (noSignUpMessage) {
          noSignUpMessage.style.display = 'none';
        }
        const oneTimeMessage = document.getElementById('oneTimeMessage');
        if (oneTimeMessage) {
          oneTimeMessage.style.display = 'none';
        }
        const alreadyPaidContainer = document.getElementById('alreadyPaidContainer');
        if (alreadyPaidContainer) {
          alreadyPaidContainer.style.display = 'none';
        }

        if (!localStorage.getItem('cachePopupShown')) {
          const popup = document.getElementById('cachePopup');
          if (popup) {
            popup.style.display = 'block';
            localStorage.setItem('cachePopupShown', 'true');
          }
        }
      } else {
        const alreadyPaidContainer = document.getElementById('alreadyPaidContainer');
        if (alreadyPaidContainer) {
          alreadyPaidContainer.style.display = 'inline-flex';
        }
      }
    }

    function closePopup() {
      const popup = document.getElementById('cachePopup');
      if (popup) {
        popup.style.display = 'none';
      }
    }

    window.onload = unlockContent;
  </script>

  <script>
    const liveCountElement = document.getElementById('liveCountDisplay');
    const WORKER_URL = "https://student-live.oppcus2025.workers.dev/live-count";

    async function fetchLiveCount() {
      try {
        const response = await fetch(WORKER_URL, { cache: "no-store" });
        if (!response.ok) throw new Error('Network response was not ok');

        const data = await response.json();
        if (data.count !== undefined) {
          liveCountElement.textContent = `Live Students Currently Online: ${data.count}`;
        } else {
          liveCountElement.textContent = 'Live count data unavailable';
        }
      } catch (err) {
        liveCountElement.textContent = 'Error fetching live count';
        console.error('Fetch error:', err);
      }
    }

    fetchLiveCount();
    setInterval(fetchLiveCount, 10000);
  </script>

  <script src="student-live.js"></script>
</body>
</html>
